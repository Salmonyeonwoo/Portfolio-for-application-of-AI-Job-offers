<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Morpheus - Broadcast ë…¸ë“œ í™œìš© ìš”ì•½</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #f0f4f8; color: #1f2937; }
        .container { max-width: 900px; margin: 2rem auto; padding: 2rem; background: white; border-radius: 1rem; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1); }
        .header { border-bottom: 3px solid #14b8a6; padding-bottom: 1rem; margin-bottom: 2rem; }
        h1 { font-size: 2.25rem; font-weight: 700; color: #0f766e; }
        h2 { font-size: 1.5rem; font-weight: 700; color: #14b8a6; margin-top: 1.5rem; border-left: 4px solid #14b8a6; padding-left: 0.75rem; }
        .tag-group { margin-top: 1rem; }
        .tag { display: inline-block; padding: 0.25rem 0.75rem; margin-right: 0.5rem; border-radius: 9999px; font-size: 0.875rem; font-weight: 500; }
        .tag-morpheus { background-color: #ccfbf1; color: #0d9488; }
        .code-block { background-color: #1f2937; color: #e5e7eb; padding: 1rem; border-radius: 0.5rem; overflow-x: auto; font-family: monospace; }
        .list-item { margin-bottom: 0.5rem; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>[Morpheus] Broadcast ë…¸ë“œ í™œìš© ìš”ì•½</h1>
            <p class="text-gray-600 mt-2">ë‹¨ì¼ ì…ë ¥ ë©”ì‹œì§€ë¥¼ ë‹¤ì¤‘ ë‹¤ìš´ìŠ¤íŠ¸ë¦¼ ìŠ¤í…Œì´ì§€ë¡œ ë™ì‹œì— ë³µì œ ë° ì „ì†¡í•˜ëŠ” Broadcast êµ¬í˜„</p>
            <div class="tag-group">
                <span class="tag tag-morpheus">Morpheus</span>
            </div>
        </div>

        <h2>í”„ë¡œì íŠ¸ ê°œìš”</h2>
        <p>Morpheus íŒŒì´í”„ë¼ì¸ ë‚´ì—ì„œ ë‹¨ì¼ ì…ë ¥ ë©”ì‹œì§€ë¥¼ ì—¬ëŸ¬ ê°œì˜ ë‹¤ìš´ìŠ¤íŠ¸ë¦¼ ìŠ¤í…Œì´ì§€ë¡œ ë™ì‹œì— ë³µì œ ë° ì „ì†¡í•˜ëŠ” **`Broadcast` ë…¸ë“œ**ì˜ ì»¤ìŠ¤í…€ ìŠ¤í…Œì´ì§€(`MpBroadcastStage`)ë¥¼ êµ¬í˜„í•˜ê³  í…ŒìŠ¤íŠ¸í–ˆìŠµë‹ˆë‹¤. ì´ ê¸°ëŠ¥ì€ í•˜ë‚˜ì˜ ë°ì´í„° ì†ŒìŠ¤ë¥¼ **ì´ìƒ íƒì§€, í†µê³„ ì§‘ê³„, ëª¨ë‹ˆí„°ë§** ë“± ì—¬ëŸ¬ ë¶„ì„ ê²½ë¡œë¡œ ë™ì‹œì— ë³´ë‚´ì•¼ í•˜ëŠ” **ë¹„ì„ í˜• íŒŒì´í”„ë¼ì¸** êµ¬ì¶•ì— í•„ìˆ˜ì ì…ë‹ˆë‹¤.</p>

        <h2>âš™ï¸ ì£¼ìš” ê¸°ìˆ  ë° ì—­í• </h2>
        <ul class="list-disc ml-6 mt-3">
            <li class="list-item"><strong>ê¸°ìˆ :</strong> Morpheus `Stage`, MRC (Morpheus Runtime Component) `Broadcast`, ë‹¤ì¤‘ ì¶œë ¥ í¬íŠ¸ ì •ì˜.</li>
            <li class="list-item"><strong>ë‹¤ì¤‘ ì¶œë ¥ ì •ì˜:</strong> ìƒì†ë°›ì€ `Stage` í´ë˜ìŠ¤ì—ì„œ `self._create_ports(1, 3)`ì„ í˜¸ì¶œí•˜ì—¬ 1ê°œì˜ ì…ë ¥ í¬íŠ¸ì™€ **3ê°œì˜ ì¶œë ¥ í¬íŠ¸**ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì •ì˜í–ˆìŠµë‹ˆë‹¤.</li>
            <li class="list-item"><strong>Broadcast ë…¸ë“œ í™œìš©:</strong> `_build` ë©”ì„œë“œ ë‚´ì—ì„œ MRCì˜ `Broadcast(builder, "broadcast")`ë¥¼ ìƒì„±í•˜ì—¬, ë“¤ì–´ì˜¤ëŠ” ë©”ì‹œì§€ë¥¼ 3ê°œì˜ ë…ë¦½ì ì¸ ì¶œë ¥ ë…¸ë“œë¡œ ë³µì œí•˜ë„ë¡ MRC ê·¸ë˜í”„ë¥¼ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.</li>
        </ul>

        <h2>ğŸ› ï¸ ì£¼ìš” êµ¬í˜„ ë‚´ìš© (MpBroadcastStage)</h2>
        <ul class="list-disc ml-6 mt-3">
            <li class="list-item"><strong>MRC ê·¸ë˜í”„ ì—°ê²°:</strong> `builder.make_edge(broadcast, outgoing_N)` êµ¬ë¬¸ì„ ì‚¬ìš©í•˜ì—¬ Broadcast ë…¸ë“œì™€ 3ê°œì˜ ë‹¤ìš´ìŠ¤íŠ¸ë¦¼ ë…¸ë“œë¥¼ ì—°ê²°í–ˆìŠµë‹ˆë‹¤. Broadcast ë…¸ë“œëŠ” ì—¬ëŸ¬ ì—£ì§€ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆì–´ ë³µì œ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.</li>
            <li class="list-item"><strong>ê¸°ëŠ¥ ê²€ì¦:</strong> Broadcast ìŠ¤í…Œì´ì§€ì˜ ê° ì¶œë ¥ í¬íŠ¸ë¥¼ ê°ê° ë‹¤ë¥¸ `InMemorySinkStage`ì— ì—°ê²°í•˜ì—¬, ë‹¨ì¼ ì†ŒìŠ¤ ë°ì´í„°ê°€ ì„¸ ê³³ì˜ ì‹±í¬ì— ì •í™•íˆ ì „ë‹¬ë˜ëŠ” ê²ƒì„ ê²€ì¦í–ˆìŠµë‹ˆë‹¤.</li>
        </ul>

        <h2>ğŸ“Œ ì£¼ìš” ì½”ë“œ ë¡œì§ (Broadcast ë…¸ë“œ ë¹Œë“œ ì¶”ìƒí™”)</h2>
        <div class="code-block">
            <pre>import mrc.core.operators as ops
from mrc.core.node import Broadcast
from morpheus.pipeline import Stage

class MpBroadcastStage(Stage):
    def __init__(self, c: Config):
        super().__init__(c)
        # 1ê°œì˜ ì…ë ¥ í¬íŠ¸ì™€ 3ê°œì˜ ì¶œë ¥ í¬íŠ¸ ì •ì˜
        self._create_ports(1, 3) 
        
    def _build(self, builder: mrc.Builder, input_nodes: list[mrc.SegmentObject]) -> list[mrc.SegmentObject]:
        # 1. Broadcast ë…¸ë“œ ìƒì„± ë° ì…ë ¥ ì—°ê²°
        broadcast = Broadcast(builder, "broadcast")
        builder.make_edge(input_nodes[0], broadcast)
        
        # 2. 3ê°œì˜ ì¶œë ¥ ë…¸ë“œ ìƒì„± ë° Broadcastì™€ ì—°ê²°
        outgoing_1 = builder.make_node("outgoing_1", ops.pass_thru())
        outgoing_2 = builder.make_node("outgoing_2", ops.pass_thru())
        outgoing_3 = builder.make_node("outgoing_3", ops.pass_thru())
        
        builder.make_edge(broadcast, outgoing_1)
        builder.make_edge(broadcast, outgoing_2)
        builder.make_edge(broadcast, outgoing_3)
        
        # 3. ìŠ¤í…Œì´ì§€ì˜ ì¶œë ¥ í¬íŠ¸ì— ëŒ€ì‘í•˜ëŠ” ë…¸ë“œ ë°˜í™˜
        return [outgoing_1, outgoing_2, outgoing_3]</pre>
        </div>
    </div>
</body>
</html>


