<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conversational AI Voice Examples</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-100">
    <div class="container mx-auto p-4 md:p-8 max-w-4xl">
        <header class="text-center mb-10">
            <h1 class="text-4xl font-bold text-gray-800">Conversational AI Voice Examples</h1>
            <p class="text-lg text-gray-600 mt-2">Generate and download AI voices to use in your presentations.</p>
        </header>

        <div class="space-y-8">
            <!-- Example 1: Cheerful Welcome -->
            <div class="bg-white p-6 rounded-2xl shadow-lg">
                <div class="flex items-center justify-between">
                    <div>
                        <h2 class="text-xl font-bold text-gray-700">Cheerful Welcome</h2>
                        <p class="text-gray-500 mt-1">An upbeat and friendly voice for a welcoming first impression.</p>
                    </div>
                    <button class="play-btn bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full flex items-center transition duration-300" data-prompt="Say cheerfully: Welcome to Stellar Solutions! How can I brighten your day?" data-voice='{"prebuiltVoiceConfig": {"voiceName": "Puck"}}' data-filename="cheerful-welcome.wav">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        <span class="ml-2">Generate & Play</span>
                    </button>
                </div>
                <div class="download-container mt-4 text-right" style="display: none;"></div>
            </div>

            <!-- Example 2: Informative & Professional -->
            <div class="bg-white p-6 rounded-2xl shadow-lg">
                <div class="flex items-center justify-between">
                    <div>
                        <h2 class="text-xl font-bold text-gray-700">Informative & Professional</h2>
                        <p class="text-gray-500 mt-1">A clear and firm voice for delivering important information.</p>
                    </div>
                     <button class="play-btn bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full flex items-center transition duration-300" data-prompt="Say in an informative tone: Our business hours are Monday to Friday, 9 AM to 5 PM Eastern Time. We are closed on weekends and public holidays." data-voice='{"prebuiltVoiceConfig": {"voiceName": "Charon"}}' data-filename="informative-professional.wav">
                         <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        <span class="ml-2">Generate & Play</span>
                    </button>
                </div>
                 <div class="download-container mt-4 text-right" style="display: none;"></div>
            </div>

            <!-- Example 3: Empathetic Support -->
            <div class="bg-white p-6 rounded-2xl shadow-lg">
                <div class="flex items-center justify-between">
                    <div>
                        <h2 class="text-xl font-bold text-gray-700">Empathetic Support</h2>
                        <p class="text-gray-500 mt-1">A gentle and warm voice for handling sensitive customer issues.</p>
                    </div>
                    <button class="play-btn bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full flex items-center transition duration-300" data-prompt="Say with a warm, gentle tone: I understand this is frustrating, and I'm truly sorry for the trouble you're experiencing. Let's work together to find a solution." data-voice='{"prebuiltVoiceConfig": {"voiceName": "Sulafat"}}' data-filename="empathetic-support.wav">
                         <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        <span class="ml-2">Generate & Play</span>
                    </button>
                </div>
                 <div class="download-container mt-4 text-right" style="display: none;"></div>
            </div>

            <!-- Example 4: Multi-Speaker Conversation -->
            <div class="bg-white p-6 rounded-2xl shadow-lg">
                 <div class="flex items-center justify-between">
                    <div>
                        <h2 class="text-xl font-bold text-gray-700">Multi-Speaker Dialogue</h2>
                        <p class="text-gray-500 mt-1">A dynamic conversation between a customer and a support agent.</p>
                    </div>
                    <button class="play-btn bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full flex items-center transition duration-300" data-prompt="TTS the following conversation between Alex and Sam:\nAlex: Hi, I'm having trouble with my recent order.\nSam: I can certainly help with that. Could you please provide the order number?" data-multi-speaker='true' data-filename="multi-speaker-dialogue.wav">
                         <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        <span class="ml-2">Generate & Play</span>
                    </button>
                </div>
                 <div class="download-container mt-4 text-right" style="display: none;"></div>
            </div>
             <!-- Error Message -->
            <div id="error-message" class="hidden bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg relative" role="alert">
                <strong class="font-bold">Error:</strong>
                <span class="block sm:inline">Could not generate audio. Please try again later.</span>
            </div>
        </div>
         <footer class="text-center mt-12 text-gray-500 text-sm">
            <p>Audio generated using the Gemini API.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const playButtons = document.querySelectorAll('.play-btn');
            const errorMessage = document.getElementById('error-message');

            const base64ToArrayBuffer = (base64) => {
                const binaryString = window.atob(base64);
                const len = binaryString.length;
                const bytes = new Uint8Array(len);
                for (let i = 0; i < len; i++) {
                    bytes[i] = binaryString.charCodeAt(i);
                }
                return bytes.buffer;
            };

            const pcmToWav = (pcmData, sampleRate) => {
                const pcm16 = new Int16Array(pcmData);
                const wavHeader = new ArrayBuffer(44);
                const view = new DataView(wavHeader);

                // RIFF identifier, file length, RIFF type
                view.setUint32(0, 1380533830, false); 
                view.setUint32(4, 36 + pcm16.byteLength, true);
                view.setUint32(8, 1463899717, false);
                // format chunk identifier, format chunk length, sample format (1 for PCM)
                view.setUint32(12, 1718449184, false);
                view.setUint32(16, 16, true);
                view.setUint16(20, 1, true);
                 // channel count, sample rate, byte rate
                view.setUint16(22, 1, true);
                view.setUint32(24, sampleRate, true);
                view.setUint32(28, sampleRate * 2, true);
                // block align, bits per sample
                view.setUint16(32, 2, true);
                view.setUint16(34, 16, true);
                // data chunk identifier, data chunk length
                view.setUint32(36, 1684108385, false);
                view.setUint32(40, pcm16.byteLength, true);

                return new Blob([view, pcm16], { type: 'audio/wav' });
            };

            const generateAndPlayAudio = async (button) => {
                const prompt = button.dataset.prompt;
                const isMultiSpeaker = button.dataset.multiSpeaker === 'true';
                const filename = button.dataset.filename;
                const downloadContainer = button.closest('.bg-white').querySelector('.download-container');
                
                errorMessage.classList.add('hidden');
                button.disabled = true;
                const originalContent = button.innerHTML;
                button.innerHTML = '<div class="loader"></div><span class="ml-2">Generating...</span>';

                let speechConfig;
                if (isMultiSpeaker) {
                    speechConfig = {
                        multiSpeakerVoiceConfig: {
                            speakerVoiceConfigs: [
                                { speaker: "Alex", voiceConfig: { prebuiltVoiceConfig: { voiceName: "Vindemiatrix" } } },
                                { speaker: "Sam", voiceConfig: { prebuiltVoiceConfig: { voiceName: "Kore" } } }
                            ]
                        }
                    };
                } else {
                    speechConfig = { voiceConfig: JSON.parse(button.dataset.voice) };
                }

                const payload = {
                    contents: [{ parts: [{ text: prompt }] }],
                    generationConfig: { responseModalities: ["AUDIO"], speechConfig: speechConfig },
                    model: "gemini-2.5-flash-preview-tts"
                };

                const apiKey = "///";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-tts:generateContent?key=${apiKey}`;
                
                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) throw new Error(`API Error: ${response.statusText}`);

                    const result = await response.json();
                    const part = result?.candidates?.[0]?.content?.parts?.[0];
                    const audioData = part?.inlineData?.data;
                    const mimeType = part?.inlineData?.mimeType;

                    if (audioData && mimeType?.startsWith("audio/")) {
                        const rateMatch = mimeType.match(/rate=(\d+)/);
                        const sampleRate = rateMatch ? parseInt(rateMatch[1], 10) : 24000;
                        
                        const pcmData = base64ToArrayBuffer(audioData);
                        const wavBlob = pcmToWav(pcmData, sampleRate);
                        const audioUrl = URL.createObjectURL(wavBlob);
                        
                        const audio = new Audio(audioUrl);
                        audio.play();

                        // Create and display download button
                        downloadContainer.innerHTML = ''; // Clear previous button
                        const downloadLink = document.createElement('a');
                        downloadLink.href = audioUrl;
                        downloadLink.download = filename;
                        downloadLink.className = 'bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-full inline-flex items-center transition duration-300';
                        downloadLink.innerHTML = `<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg><span class="ml-2">Download .wav</span>`;
                        downloadContainer.appendChild(downloadLink);
                        downloadContainer.style.display = 'block';

                    } else {
                        throw new Error("Invalid audio data in response.");
                    }

                } catch (error) {
                    console.error('Error generating audio:', error);
                    errorMessage.classList.remove('hidden');
                } finally {
                    button.disabled = false;
                    button.innerHTML = originalContent;
                }
            };

            playButtons.forEach(button => {
                button.addEventListener('click', () => generateAndPlayAudio(button));
            });
        });
    </script>
</body>
</html>

