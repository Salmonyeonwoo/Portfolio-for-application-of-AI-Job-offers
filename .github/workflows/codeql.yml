# GitHub Actionsë¥¼ ìœ„í•œ CodeQL ì›Œí¬í”Œë¡œìš° íŒŒì¼
# ì´ íŒŒì¼ì€ GitHub ì €ì¥ì†Œì˜ ì½”ë“œë¥¼ ìë™ìœ¼ë¡œ ë¶„ì„í•˜ì—¬ ë³´ì•ˆ ì·¨ì•½ì ì„ ì°¾ì•„ì¤ë‹ˆë‹¤.
name: "CodeQL"

on:
  push:
    branches: [ "main", "develop" ] # main ë˜ëŠ” develop ë¸Œëœì¹˜ì— ì½”ë“œê°€ pushë  ë•Œ ì‹¤í–‰
  schedule:
    - cron: '30 14 * * 1' # ë§¤ì£¼ ì›”ìš”ì¼ UTC 14:30 (í•œêµ­ ì‹œê°„ ì›”ìš”ì¼ ë°¤ 11:30)ì— ì •ê¸°ì ìœ¼ë¡œ ì‹¤í–‰

jobs:
  analyze:
    name: Analyze
    # ubuntu ìµœì‹  ë²„ì „ì—ì„œ ì‹¤í–‰í•©ë‹ˆë‹¤.
    runs-on: ubuntu-latest
    
    permissions:
      actions: read
      contents: read
      security-events: write

    strategy:
      fail-fast: false
      matrix:
        # ğŸ’¡ ì¤‘ìš”: ë¶„ì„í•  ì–¸ì–´ë¥¼ ëª…í™•í•˜ê²Œ ì§€ì •í•©ë‹ˆë‹¤.
        # ì´ í¬íŠ¸í´ë¦¬ì˜¤ëŠ” JavaScript ì½”ë“œë¥¼ í¬í•¨í•˜ë¯€ë¡œ 'javascript-typescript'ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
        language: ['javascript-typescript']
        
    steps:
    - name: Checkout repository
      # actions/checkout@v4 ë¥¼ ì‚¬ìš©í•˜ì—¬ ì €ì¥ì†Œ ì½”ë“œë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.
      uses: actions/checkout@v4

    # CodeQL ìŠ¤ìº” ë„êµ¬ë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.
    - name: Initialize CodeQL
      uses: github/codeql-action/init@v3
      with:
        languages: ${{ matrix.language }}
        # config-file: ./.github/codeql/codeql-config.yml # (í•„ìš”ì‹œ ê³ ê¸‰ ì„¤ì • íŒŒì¼ ê²½ë¡œ)
        # queries: security-and-quality # (ë¶„ì„í•  ì¿¼ë¦¬ ì¢…ë¥˜)

    # CodeQL ë¶„ì„ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
    - name: Perform CodeQL Analysis
      uses: github/codeql-action/analyze@v3
      with:
        category: "/language:${{matrix.language}}"
